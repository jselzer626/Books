{% extends "layout.html" %}

{% block title %}
  Login
{% endblock %}

{% block main %}
<div class="container">
  <form action="/login" method="post">
    <div class="form-group">
      <br>
      <br>
      <h4 class="display-4">Login</h4>
    </div>
    <div class="form-group">
      <label>Username</label>
      <input autocomplete="off" autofocus class="form-control" name="username" placeholder="Username" type="text">
    </div>
    <div class="form-group">
      <label>Password</label>
      <input autocomplete="off" class="form-control" name="password" placeholder="Password" type="password">
    </div>
    <button class="btn btn-primary" id="login">Login</button>
  </form>
  <br>
  <p id="invalid_message" class="text-danger">{{ message }}</p>
  <br>
  <div>
    <p class="lead">No Account Yet?<button class="btn btn-primary startbutton" id="register">Register</button></p>
  </div>
</div>
  <script>
    //if server rendered template with error message then display
    document.getElementById("invalid_message").innerHTML === "Incorrect username or password" ? invalid_input_indicator("Incorrect username or password") : ''

    //if username empty or password less than 5 character prevent from accessing server
    document.getElementById("login").onclick = e => {
      let username = document.getElementById("username")
      let password = document.getElementById("password")

      if (!username.value || password.value.length < 5){
        invalid_input_indicator("Invalid username or password")
        e.preventDefault()
        return false
      }
      else {
        document.getElementById("login").submit()
      }
    }

    //redirect user to register page if clicked
    document.getElementById("register").onclick = () => {
      window.location.href = "/register";
    }

  </script>

{% endblock %}
