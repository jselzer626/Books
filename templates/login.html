{% extends "layout.html" %}

{% block title %}
  Login
{% endblock %}

{% block main %}
<div class="container">
  <form action="/login" method="post" class="register_login_form">
    <br>
    <br>
    <h4 class="display-4">Login</h4>
    <br>
    <div class="form-group col-xs-3">
      <label>Username</label>
      <input autocomplete="off" autofocus class="form-control" name="username" id="username" placeholder="Username" type="text">
    </div>
    <div class="form-group">
      <label>Password</label>
      <input autocomplete="off" class="form-control" name="password" id="password" placeholder="Password" type="password">
    </div>
  </form>
  <button class="btn btn-primary" id="login">Login</button>
  <br>
  <br>
  <p id="invalid_message" class="text-danger">{{ message }}</p>
  <div>
    <p class="lead">No Account Yet?<button class="btn btn-primary startbutton" id="register">Register</button></p>
  </div>
</div>
  <script>
    //if server rendered template with error message then display
    document.getElementById("invalid_message").innerHTML === "Incorrect username or password" ? invalid_input_indicator("Incorrect username or password.") : ''

    //if username empty or password less than 5 character prevent from accessing server
    document.getElementById("login").onclick = e => {
      console.log("here")
      let username = document.getElementById("username")
      let password = document.getElementById("password")

      if (!username.value || password.value.length < 5){
        invalid_input_indicator("Invalid entries. Please ensure fields are not blank.")
        e.preventDefault()
        return false
      }
      else {
        document.getElementsByTagName("form")[0].submit()
      }
    }

    //redirect user to register page if clicked
    document.getElementById("register").onclick = () => {
      window.location.href = "/register";
    }

  </script>

{% endblock %}
